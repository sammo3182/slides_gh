---
title: "ç¤¾ä¼šç½‘ç»œæ–¹æ³•è®º: åˆ†æç½‘ç»œ"
subtitle: "Political Research with Big Data (80700673)"

author: "èƒ¡æ‚¦"
institute: "æ¸…åå¤§å­¦" 

knitr: 
    opts_chunk: 
      echo: true

format: 
  revealjs:
    css: style_basic.css
    theme: goldenBlack.scss
    # logo: https://gitlab.com/sammo3182/backup/raw/85b3c1ad4b459d7a9f901f124b936428eda5fcaf/logo_zzxx.png?inline=true
    slide-number: true
    incremental: true
    preview-links: true # open an iframe for a link
    link-external-newwindow: true
    self-contained: false
    chalkboard: true # allwoing chalk board B, notes canvas C
    
    show-slide-number: all # `speaker` only print in pdf, `all` shows all the time
    width: 1600
    height: 900
    title-slide-attributes:
      data-background-image: https://gitlab.com/sammo3182/backup/raw/85b3c1ad4b459d7a9f901f124b936428eda5fcaf/logo_THPS.png?inline=true
      data-background-size: 250px   
      data-background-position: top 10% right 5%
---


```{r setup, include = FALSE}
if (!require(pacman)) install.packages("pacman")
library(pacman)

p_load(
  knitr, sna, network, tidyverse
) # data wrangling # data wrangling

# Functions preload
set.seed(313)
```

## æ¦‚è¦

::::{.columns style="text-align:center; margin-top: 3em"}
:::{.column .nonincremental width="50%"}
*ç†è§£ç½‘ç»œ*

+ ç½‘ç»œæ–¹æ³•è®º &check;
+ ç½‘ç»œè¦ç´   &check;
+ è‡ªæˆ‘ä¸­å¿ƒç½‘ç»œ  &check;
:::

:::{.column .nonincremental width="50%"}
*åˆ†æç½‘ç»œ*

+ é‚»å±…åˆ†æ
+ æ‰©æ•£åˆ†æ
+ å…¨ç½‘åˆ†æ
:::
::::


# é‚»å±…åˆ†æ

## é‚»å±…ç±»å‹

:::{.nonincremental .large style="text-align:center; margin-top: 3em"}
1. Dyads
1. Triads
1. Communities
:::

## Dyads Distribution

:::: {.columns}
:::{.column width="50%" .fragment}
1. None: A &nbsp; B
1. Arc: A &rarr; B; B &larr; C
1. Reciprocal(äº’æƒ ): A &harr; B
:::

:::{.notes}
Arc is a directed edge

Both are using the described the same phenomenon
:::

:::{.column width="50%" .fragment}
![](images/sna_arc.png){height=400}
:::
::::

:::: {.columns}

::: {.column .fragment width="50%"}
- Dyadic: $$R = \frac{\#Reciprocated\ Pairs}{\# Connected\ Pairs}$$
:::

::: {.column .fragment width="50%"}
- Arc: $$R = \frac{\#Reciprocated\ Arcs}{\# Total\ Arcs}$$ 
:::

::::


## Simmelian tie

Dyads in a triad:

![](images/sna_taoyuan.jpeg){fig-align="center" height=400}

- Simmelian tie: Dyads åŒæ—¶ä¸ç¬¬ä¸‰æ–¹æœ‰äº’æƒ å…³ç³»
    - Dyads more stable when embedded in triads


## Triadic Analysis

Aã€Bã€Cä¸‰æ–¹ï¼Œå­˜åœ¨å‡ ç§å»ºç«‹å…³ç³»çš„æ–¹å¼? 

:::{.fragment style="text-align:center"}
(2<sup>2</sup>)<sup>3</sup> = 64

![](images/sna_triads.gif){height=500 fig-align="center"}
:::

## Triads Distribution

:::{.panel-tabset}

### Transitive Triads

A&rarr;B&rarr;C + A&rarr;C

![](images/sna_triadsTrans.png){height=600 fig-align="center"}

### Vacuous Triads
![](images/sna_triadsVac.png){height=600 fig-align="center"}

:::{.notes}
/v'Ã¦kjuÉ™s/

No feature a directed path

Used to study social capital: closure (all nodes are reciprocal) and brokerage

Prell, Christina, and John Skvoretz. 2008. â€œLooking at Social Capital Through Triad Structures.â€ Connections 28(2): 4â€“16.
:::

:::



## åº”ç”¨

å®šä¹‰ç½‘ç»œç»“æ„[å¹³è¡¡]{.red}ï¼ˆStructural Balanceï¼‰

:::{.r-stack}
![](images/sna_structuralBalance.jpg){.fragment fig-align="center" height=700}

![](images/sna_structuralBalance.png){.fragment fig-align="center" height=700}
:::


:::{.notes}
The enemy of my enemy is my friends.

Maoz, Zeev, Lesley G. Terris, Ranan D. Kuperman, and Ilan Talmud. 2007. â€œWhat Is the Enemy of My Enemy? Causes and Consequences of Imbalanced International Relations, 1816â€“2001.â€ Journal of Politics 69(1): 100â€“115.

è¿‡å¾€186å¹´ä¸­ï¼ŒIRå……æ»¡äº†imbalance, å‹ä¹‹æ•Œä¸ºå‹ï¼Œå‹by alliances, æ•Œmilitary disputes

Realistic factors increase imbalance: strategic rivalry, opportunism and exploitative tendencies, capability parity, and contiguity

Liberal factors reduce it: joint democracy, economic interdependence, shared
IGO membership

:::


## Beyond k-ads {background-image="images/sna_smallWorld.bmp" background-position="center" background-size="contain"}

ç¤¾ç¾¤ï¼ˆCommunityï¼‰: e.g, å°ä¸–ç•Œ

::::{.columns style="text-align:right"}
:::{.column width="60%" .fragment}
:::

:::{.column width="40%" .fragment}
+ 695 äºº
+ å¹³å‡è·ç¦»ä¸ºå¤§çº¦5æ­¥
+ å¹³å‡æ¯äºº3æ­¥å†…å°±èƒ½è¦†ç›–75ä¸ªå…¶ä»–äºº
:::
::::


:::{.notes}
è¶…è¶Šstrong, presented tiesï¼Œå°ä¸–ç•Œç½‘ç»œæ˜¯ä¸€ç±»ç‰¹æ®Šçš„å¤æ‚ç½‘ç»œç»“æ„ï¼Œåœ¨è¿™ç§ç½‘ç»œä¸­å¤§éƒ¨åˆ†çš„èŠ‚ç‚¹å½¼æ­¤å¹¶ä¸ç›¸è¿ï¼Œä½†ç»å¤§éƒ¨åˆ†èŠ‚ç‚¹ä¹‹é—´ç»è¿‡å°‘æ•°å‡ æ­¥å°±å¯åˆ°è¾¾ï¼Œæ¯”å¦‚å…­åº¦ç©ºé—´ç†è®ºï¼ˆå®é™…å¯èƒ½åœ¨2å·¦å³ï¼Œæœ€é•¿ä¸è¿‡8ï¼‰


**Reachability in Colorado Springs**

Epidemic Potential in Human Sexual Networks

sexual contact only, STD 

High-risk actors over 4 years
:::


## å®šä¹‰ç¤¾ç¾¤

![](images/sna_community.jpg){height=300 fig-align="center"}


::::{.columns style="text-align:center; margin-top: 2em"}
:::{.column width="50%" .fragment}
Bottom Up: 

Cliques &rarr; n-cliques &rarr; n-clans
:::

:::{.column width="50%" .fragment}
Top Down: 

k-cores &rarr; factions &rarr; modularity
:::
::::


## K-Core

The k-core of a network graph G is the maximal subgraph H &sube; G in which all vertices have degree at least k

![](images/sna_kcore.png){height=650 fig-align="center"}

:::{.notes}

https://www.youtube.com/watch?v=rHVrgbc_3JA

<img src="images/sna_kcoresSolution.png" height = 300 />

æ¯ä¸ªäººéƒ½ä¸å…¶ä»–è‹¥å¹²äººç›¸è¿

4-core is the null graph of the original graph or DNE (does not exist)
:::


## Faction

ç†æƒ³çŠ¶æ€ï¼š

> é‚»å›½ç›¸æœ›ï¼Œé¸¡çŠ¬ä¹‹å£°ç›¸é—»ï¼Œæ°‘è‡³è€æ­»ï¼Œä¸ç›¸å¾€æ¥ â€”â€”ã€Šè€å­Â·ç¬¬å…«åã€‹

::::{.columns style="text-align:center; margin-top: 2em"}
:::{.column width="50%" .fragment}
![](images/sna_faction.png){height=600 fig-align="center"}
:::

:::{.notes}
ç»„å†…ç´§å¯†è¿ç»“ï¼Œæ— è·¨ç»„è¿ç»“ã€‚
:::

:::{.column width="50%" .fragment}
- å®ç°ï¼šArranging actors to resemble the ideal as closely as possible.
- æ­¥éª¤ï¼š 
    1. Partition
    1. Evaluation
    1. Moving
    1. Evaluation, again
    1. Repeat
:::
::::

:::{.notes}
+ Partition the network
+ Evaluate how good the partition is
+ Move some actors from one group to another
+ See if there's improvement
+ Keep repeating the above steps until further improvement is impossible
:::

## è¾¨åˆ«ç¤¾ç¾¤

1. Faction method?
    - Heuristic method, ä½†éš¾ä»¥è¿›è¡Œå¹¶è¡Œè¿ç®—
1. Hierarchical Clustering

::::{.columns style="text-align:center"}
:::{.column width="50%" .fragment}
*Agglomerative method*^[å¯èƒ½ä¸¢å¤±å¼±è¿ç»“verticesã€‚]

![](images/sna_agglomerative.bmp){height=400 fig-align="center"}

:::

:::{.notes}
Agglomerative (/É™'É¡lÉ”mÉ™rÉ™tiv/) åŸºäº a wide variety of similarity measuresï¼Œä»empty graph ï¼ˆæ²¡æœ‰ä»»ä½•tiesï¼‰å¼€å§‹ï¼Œå°†æœ€similarçš„nodesåŠ åœ¨ä¸€èµ·
:::

:::{.column width="50%" .fragment}
*Divisive method (top down)*

![](images/sna_divisive.bmp){height=400 fig-align="center"}
:::

:::{.notes}
Divisive ä»complete graph å¼€å§‹ï¼Œ dedrogramæ¨ªåˆ‡äºŒåˆ†ç‚¹ï¼‰ï¼ˆhalting pointsï¼‰
:::
::::


## Agglomerative vs. Divisive

![](images/sna_agglomerativeDivisive.bmp){height=800 fig-align="center"}

:::{.notes}
Aå–„äºå‘ç°å¼ºè¿ç»“communityï¼Œ Dä¸ä¼šåœ°åŒºé™¤peripheral vertices
:::

## ç¤¾ç¾¤ç‰¹å¾ï¼šå†…èšæ€§

A.k.a., å‡èšåŠ›

::: {.panel-tabset}
### è¿ç»“æ€§

![](images/sna_cohesive.png){height=500 fig-align="center"}

### å¯è¾¾æ€§
![](images/sna_cohesiveII.png){height=500 fig-align="center"}
:::

:::{.notes}
ç”±ä¸€ç‚¹åˆ°å…¶ä»–ç‚¹pathsè¶Šå¤šå¯è¾¾æ€§è¶Šé«˜
:::

## æœ€å°å†…èšæ€§

![](images/sna_minimalCohesion.png){height=300 fig-align="center"}

::::{.columns style="text-align:center; margin-top: 2em"}
:::{.column width="50%" .fragment}
### é«˜
+ é›†æƒ
+ ä¿¡æ¯é›†ä¸­
+ ä¸å¹³ç­‰
+ ä¸ªä½“è¡Œä¸ºå½±å“å¤§
+ ç¢ç‰‡åŒ–ç»“æ„
:::

:::{.column width="50%" .fragment}
### ä½
+ åˆ†æƒ
+ ä¿¡æ¯é€æ˜
+ å¹³ç­‰
+ ä¸ªä½“è¡Œä¸ºéš¾ä»¥æ’¼åŠ¨ç»“æ„
+ å‡è¡¡ç»“æ„
:::
::::


:::{.notes}
Minimal cohesion: without that node, the network will break apart
:::

## Modularity

Modularity: æ¯”èµ·è¯†åˆ«å‡ºç¾¤ä½“ï¼Œæ›´å…³æ³¨ç¤¾ç¾¤å¦‚ä½•[ç»„æˆ]{.red}ç¤¾ä¼šã€‚

![](images/sna_moduality.png){height=600 fig-align="center"}

## åº”ç”¨

Tamburrini et al 2015

![](images/sna_languageIdentity.png){height=600 fig-align="center"}

:::{.notes}
Tamburrini, Nadine, Marco Cinnirella, Vincent A. A. Jansen, and John
Bryden. 2015. â€œTwitter Users Change Word Usage According to Conversation-Partner Social Identity.â€ Social Networks 40: 84â€“89.

modularity maximisation algorithm

word-usage frequencies (solid bars at the top of eachplot),   
word-ending frequencies (slashed bars in the middle)    
apostrophe (/É™p'É’strÉ™fi/) usage (crossed bars at the bottom).

1. äººä»¬æ ¹æ®è‡ªå·±çš„communityæ”¹å˜è¯­è¨€ç‰¹å¾
1. communitiesè¶Šç‹¬ç«‹ï¼Œè¯­è¨€ç‰¹å¾è¶Šæ˜æ˜¾
:::


# æ‰©æ•£åˆ†æ

## åˆ†æç›®æ ‡

:::{.fragment .fade-in-then-semi-out}
![](images/sna_covid19difussion.gif){height=500 fig-align="center"}
:::

:::{style="text-align:center"}
1. ï¼ˆäº‹ä»¶ã€æ³•å¾‹ã€æ”¿ç­–ã€ä¹ æƒ¯ etc.ï¼‰é‡‡ç”¨çš„æ—¶é—´
1. è°æ˜¯â€œå§‹ä½œä¿‘è€…â€ vis-a-vis â€œç¬¬ä¸€ä¸ªåƒèƒèŸ¹çš„äººâ€
1. æ‰©æ•£è¿‡ç¨‹æ˜¯è°å½±å“äº†è°
:::

## åˆ†æè§†è§’

:::{.panel-tabset}
### è”ç³»ç½‘ç»œ<br>Contact network

â€œPatient 0â€æ•ˆåº”: è°æ¥è§¦äº†Patient 0ï¼Œæœ€ç»ˆæ„ŸæŸ“äº†è°

![](images/sna_diffusionQ.png){height=500 fig-align="center"}

:::{.notes}
Wu, J., Crawford, F. W., Kim, D. A., Stafford, D., & Christakis, N. A. (2018). Exposure, Hazard, and Survival Analysis of Diffusion on Social Networks. Statistics in Medicine, 37(17), 2561â€“2585. https://doi.org/10.1002/sim.7658
:::

### æš´éœ²ç½‘ç»œ<br>Exposure network

è°æ˜¯æ˜“æ„Ÿäººç¾¤

![](images/sna_diffusionQ.png){height=500 fig-align="center"}

:::{.notes}
è”ç³»ç½‘ç»œçš„å­é›†
:::

### ä¼ åŠ¨ç½‘ç»œ<br>Transmission network

ä¼ æ’­ï¼ˆä¼ é€’ï¼‰è·¯å¾„ç©¶ç«Ÿæ˜¯æ€æ ·çš„

![](images/sna_diffusionQ.png){height=500 fig-align="center"}
:::

## åº”ç”¨ï¼šè·¯å¾„åˆ†æ

::::{.columns style="text-align:center; margin-top: 2em"}
:::{.column width="70%"}
*Valente 1996*: Threshold model in the view of network

![](images/sna_exposure.png){height=600 fig-align="center"}
:::

:::{.notes}
exposureï¼šæŒ‰æ—¶é—´adopt

Valente, Thomas W. 1996. â€œSocial Network Thresholds in the Diffusion of Innovations.â€ *Social Networks* 18(1): 69â€“89.

Threshold: Early adopter, early majority, late majority, laggards.

ä¸ªä½“ç½‘ç»œä¸å…¨ç½‘è§’åº¦ç†è§£threshold
:::


:::{.column width="30%" .fragment}
â€œå§‹ä½œä¿‘è€…â€?

Brokers?

Centrality?

Node attributes?
:::
::::


## æ‰©æ•£çš„ç°å®å«ä¹‰

::::{.columns .large style="text-align:center; margin-top: 2em"}
:::{.column width="50%" .fragment}
**æœºåˆ¶**

+ å­¦ä¹ 
+ ç«äº‰
+ æ¨¡ä»¿
:::

:::{.column width="50%" .fragment}
**è¡¨ç°**

+ Common shock
+ Homophily
+ Strategic interaction
:::
::::


## åº”ç”¨

Desmarais, Harden, Boehmke (2015)

::::{.columns style="text-align:center"}
:::{.column width="40%" .fragment}
*ä¼ æ’­è·¯å¾„å¯ç¤º*ï¼š

+ iå·æ¯”jå·æ—©é‡‡ç”¨ä¸€ä¸ªæ”¿ç­–çš„æ¬¡æ•°
+ åŒä¸€æ”¿ç­–iå’Œjé‡‡ç”¨çš„æ—¶é—´å·®
+ ié‡‡ç”¨åœ¨å¤šå¤§ç¨‹åº¦ä¸Šèƒ½é¢„æµ‹jçš„é‡‡ç”¨
:::

:::{.notes}
Desmarais, Bruce A., Jeffrey J. Harden, and Frederick J. Boehmke. 2015. â€œPersistent Policy Pathways: Inferring Diffusion Networks in the American States.â€ *American Political Science Review* 109(2): 392â€“406.
:::

:::{.column width="60%" .fragment}
![](images/sna_diffusionFlorida.png){height=600 fig-align="center"}
:::

:::{.notes}
ä½›ç½—é‡Œè¾¾æ˜¯è¿‘äº”å¹´policyçš„ä¸»è¦æ¨åŠ¨è€…

ä¸€ä¸ªå·è¢«è®¤ä¸ºinnovativeï¼Œå¹¶ä¸å•çº¯å–å†³äºå®ƒå¤šå¿«é‡‡ç”¨ä¸€ä¸ªpolicy
:::
::::


## æœºåˆ¶è¾¨æï¼šå½±å“è¿˜æ˜¯ä»…ä»…æ˜¯ç›¸ä¼¼

:::{style="text-align:center"}
Influence vs. Homophily
:::

:::{.fragment}
Aral et al 2009: Matched sample estimation &rarr; ä¼ ç»Ÿæ–¹æ³•ä¼šé«˜ä¼°å½±å“æœºåˆ¶ 300-700%
:::

:::{.notes}
Aral, Sinan, Lev Muchnik, and Arun Sundararajan. 2009. â€œDistinguishing Influence-Based Contagion from Homophily-Driven Diffusion in Dynamic Networks.â€ Proceedings of the National Academy of Sciences 106(51): 21544â€“49.

åœ¨ç”¨Yahooï¼Goï¼ˆç±»ä¼¼äºä¼ä¸šå¾®ä¿¡ï¼‰ä½¿ç”¨è€…æ•°æ®

æ ¹æ®èŠ‚ç‚¹çš„ç½‘ç»œæ€§è´¨ï¼šåœ¨æ§åˆ¶äº†nodesçš„å„ç§è¡Œä¸ºå’Œä¸ªä½“ç‰¹ç‚¹åï¼Œæ¯”è¾ƒé‚£äº›æœ‰å¾ˆå¤šadopted friends å’Œæ²¡æœ‰é‚£ä¹ˆå¤šadopted friendsä¹‹äºº
:::

:::{.fragment style="text-align:center; margin-top: 2em"}
e.g. "äº‘é›†å“åº”"è¿˜æ˜¯"äººä»¥ç¾¤åˆ†" ï¼ˆLazer et al. 2010ï¼‰

+ 164å…¬å…±æ”¿ç­–2å¹´çº§ç¡•å£«ç”Ÿ
+ åŒcohort
+ åˆšå…¥å­¦(T1)ï¼Œç¬¬äºŒå­¦æœŸå¼€å§‹(T2)ï¼Œç¬¬äºŒå­¦æœŸç»“æŸ(T3)
:::

:::{.notes}
Influencing vs. affiliating 

Lazer, David et al. 2010. â€œThe Coevolution of Networks and Political Attitudes.â€ *Political Communication* 27(3): 248â€“74.

ä¸ªä½“æ ¹æ®å…¶associatesæ”¹å˜æ­£æ”¿æ²»çœ‹æ³•ï¼Œè¿™ç§conformityå—social ties è€Œétask tieså½±å“ã€‚è€Œæ”¿æ²»çœ‹æ³•åè¿‡æ¥å¯¹relationshipå½±å“ä¸å¤§ã€‚
:::

## Network analysis &#129309; Spatial Analysis

Modeling Peer Influence

\begin{align}
\boldsymbol{Y}^{(1)} &= \boldsymbol{XB},\\
\boldsymbol{Y}^{(t)} &= \alpha\boldsymbol{WY}^{t} + (1 - \alpha) Y^{(1)}.
\end{align}


- **Y**<sup>(1)</sup>: Nä¸ªäººï¼Œæ¯äººå¯¹Mä¸ªé—®é¢˜çš„[åˆå§‹]{.red}çœ‹æ³• (N &times; M); 
- **X**: Kä¸ªä¼šå½±å“ä¸ªä½“çœ‹æ³•çš„ï¼ˆ[å¤–ç”Ÿæ€§]{.red}ï¼‰å˜é‡ï¼ˆN &times; Kï¼‰;
- &alpha;: ï¼ˆå†…ç”Ÿæ€§çš„ï¼‰äººé™…å½±å“å¯¹Yçš„ä½œç”¨çš„[æ¯”é‡]{.red};
- **W**: [äººé™…å…³ç³»çŸ©é˜µ]{.red}ï¼ˆN &times; N).


# å…¨ç½‘åˆ†æ

## æ–¹æ³•è®ºçš„è·ƒè¿(å¤ä¹ )

::::{.columns style="text-align:center; margin-top: 2em"}
:::{.column width="50%" .fragment}
**ä¼ ç»Ÿè®¡é‡**

1. ç¡®å®šH<sub>0</sub>
1. æè¿°H<sub>0</sub>ä¸‹æ ·æœ¬åˆ†å¸ƒç‰¹å¾
1. æ£€éªŒè§‚æµ‹å€¼æ˜¯å¦åœ¨â€œnull distributionçš„å°¾å·´ä¸Šâ€
1. æ‹’ç»/ä¸æ‹’ç»H<sub>0</sub>

- ASSUMPTION
    + Sample distribution å·²çŸ¥
    + IID observations

:::

:::{.column width="50%" .fragment}
**ç½‘ç»œåˆ†æ**

1. ç ”ç©¶å…³ç³»
1. Sampleæ˜¯ä»€ä¹ˆï¼Ÿ
1. Parameteræ€ä¹ˆåˆ¤æ–­ï¼Ÿ
1. H<sub>0</sub>æ˜¯ä»€ä¹ˆ
:::
::::

:::{.notes}
- Sample: å…³ç³»
- Parameterï¼šå¯¹æ¯”éšæœºç½‘ç»œ
- H<sub>0</sub>: Xä¸å½±å“ç½‘ç»œï¼ˆå…³ç³»ï¼‰ç»“æ„
:::


## éšæœºç½‘ç»œåˆ†æ

:::{style="text-align:center"}
Conditional Uniform Graph (CUG)

:::{.fragment .fade-in-then-out}
Quadratic Assignment Procedure (QAP)
:::
:::

::::{.columns style="text-align:center"}
:::{.column width="50%" .fragment}
"Baseline network"æ¯”è¾ƒåˆ†æçš„ä¸€ç§

1. å›ºå®šå±æ€§ (size, prob of edges, dyad census, degree, # of triangles, etc.)
1. åŒç­‰å¯èƒ½
:::

:::{.notes}
æ ¹æ®ç‰¹å®šå±æ€§é€šè¿‡bernoulliåˆ†å¸ƒå»ºç«‹éšæœºç½‘ç»œï¼Œæ‰€æœ‰ç½‘ç»œéƒ½æ˜¯è¢«è§†ä¸ºåŒç­‰å¯èƒ½å‡ºç°

Generating 1000 random graphs of size 20; assumes digraph. tprob, probility of any tie existing is 30%. Plotting the density. it is probability, so, some is before 0.3, some beyone 0.3
:::

:::{.column width="50%" .fragment}
```{r cugNet}

library(sna)
rand.gr <- rgraph(n = 20, m = 1000, tprob = 0.3)
plot(density(gden(rand.gr)))
```
:::

:::{.notes}
- n: The size of the vertex set (|V(G)|) for the random graphs
- m: The number of graphs to generate
- tprob: Information regarding tie (edge) probabilities; see below
:::
::::


## Network Hypotheses (H<sub>0</sub>)

$$Network_{obs}\quad vs.\quad Network_{ran}$$

:::{style="text-align:center"}
  æ£€éªŒè§‚æµ‹ç½‘ç»œä¸éšæœºç½‘ç»œåœ¨è¿™äº›æ–¹é¢æ˜¯å¦ç›¸å¼‚
:::

![](images/sna_networkHypothesis.png){height=400 fig-align="center"}

## Conditional Uniform Graph Test

::::{.columns style="text-align:center; margin-top: 2em"}
:::{.column width="50%" .fragment}
```{r cugNetReal}

#| class-source: long_chunk
#| classes: long_chunk

library(network);data(emon)
g <- emon$Cheyenne
g
```
:::

:::{.notes}
Drabek et al. (1981) provide seven case studies of emergent multi-organizational networks (EMONs) in the context of search and rescue (SAR) activities. Networks of interaction frequency are reported, along with several organizational attributes.
:::

:::{.column width="50%" .fragment}
```{r cugTestDens, fig.align='center'}

#| class-source: long_chunk
#| classes: long_chunk

## Density 
cug.test(g, gden, mode="digraph", cmode="size", reps=1000) %>% 
  plot.cug.test()
```
:::
::::

---

```{r cugTests}
#| eval: false

###Reciprocity
cug.test(g, grecip, mode="digraph", cmode="size", reps=1000)

####Controlling the number of edges & size
cug.test(g, grecip, mode="digraph", cmode="edges", reps=1000)

####Controlling the dyad census
cug.test(g, grecip, mode="digraph", cmode="dyad.census", reps=1000)
```


```{r cugTestEdges}
#| fig-align: center

###Transitivity
cug.test(g, gtrans, mode="digraph", cmode="edges", reps=1000) %>% 
  plot.cug.test() 
```

## éšæœºç½‘ç»œåˆ†æ

:::{style="text-align:center"}
:::{.fragment .fade-out}
Conditional Uniform Graph (CUG)
:::

Quadratic Assignment Procedure (QAP)

:::

::::{.columns style="text-align:center; margin-top: 2em"}
:::{.column width="50%" .fragment}
1. åˆ›å»ºéšæœºç½‘ç»œåˆ†å¸ƒ (= CUG)
1. æ§åˆ¶ç½‘ç»œç»“æ„ (&ne; CUG)


:::

:::{.notes}
ç½‘ç»œç»“æ„: centrality ç­‰

non-parametricï¼Œä»sampleä¸­æŠ½å‡ºä¸¤ç»„ï¼Œå¯¹æ¯”statsï¼Œçœ‹æ˜¯å¦ä¸€æ ·ã€‚
ä¸t-testç­‰çš„å¯¹æ¯”é‡è¦ä¸åŒåœ¨äºä¸æ˜¯è·Ÿnormalæ¯”
:::

:::{.column width="50%" .fragment}
é€šè¿‡permutation testå®ç°:

1. è®¡ç®—åŸå§‹ç½‘ç»œçš„correlation coefficient;^[Pearson's r correlation or Euclidean distance]
1. Permuteä¸€äº›verticesï¼›
1. å°†Permuted ç½‘ç»œå’ŒåŸå§‹ç½‘ç»œç›¸å¯¹æ¯”ï¼›
1. ä¸€é¡¿ç‹‚Permute + ç‹‚æ¯”
1. çœ‹çœ‹correlationçš„åˆ†å¸ƒ
1. ç¡®å®šç‰¹å®šå€¼å’ŒåŸå§‹ç½‘ç»œç›¸åŒçš„æ¦‚ç‡
:::

:::{.notes}
ç½‘ç»œcorrelation æ ¹æ®ä¸¤ç‚¹é™¤ç›¸äº’è¿æ¥å¤–çš„å…¶ä»–degree (remaining degree)è®¡ç®—
:::
::::


## å¤šå…ƒç½‘ç»œåˆ†æ (QAP)

OV: ç½‘ç»œ   
EV: è§£é‡Šå˜é‡adjacency matrices

$$E(Y_{ij}) = \beta_0 + \beta_1X_{1ij} + \beta_2X_{2ij} + ... + \beta_kX_{kij}.$$


:::{.fragment}

```{r netReg-data, echo=FALSE}
reports <- read.csv("data/reports.csv")
reports <- reports[, -1]
friends <- read.csv("data/friends.csv", row.names = "ID")
advice <- read.csv("data/advice.csv", row.names = "ID")
```


```{r netReg}
qap_reg <- netlogit(advice, list(friends, reports), nullhyp = "qap", reps = 10)
summary(qap_reg)
```
:::

:::{.notes}
There are also `netlm` etc.

Not 10, often over 1000

nullhyp choices: qap quick, qapspp robust
:::


## ERGM

::::{.columns}
:::{.column width="35%" .fragment}
*é€šç›˜è€ƒè™‘*ï¼š

1. Nodal
1. Edge (Dyadic)
1. Network (Structural)
:::

:::{.notes}
æ›´å…³é”®åœ¨ï¼Œåœ¨ç†è§£ä¸€ä¸ªçš„æ—¶å€™è€ƒè™‘åˆ°å…¶ä»–å±‚æ¬¡é—®é¢˜ï¼Œâ€œå…¨æ–¹ä½è§†å¬æ„Ÿå—â€

ä½†å¦‚æœå¯¹structureä¸æ„Ÿå…´è¶£ï¼Œä¸éœ€è¦ç”¨ERGM

Latent space models ä¹Ÿå¯ä»¥æ§åˆ¶structureï¼Œä½†ç›®çš„åœ¨äºå»é™¤è€Œä¸æ˜¯careï¼Œè€Œä¸”æ˜¯åŸºäºbaysian
:::

:::{.column width="65%" .fragment}
:::{.fragment}
*Interdependence*

1. é¢å¯¹å…±åŒçš„æ•Œäººï¼Œæ˜¯å¦å‡å°å½¼æ­¤æ•Œæ„ï¼Ÿ
1. åˆä½œè€…é€‰æ‹©è¿‡ç¨‹ç»ˆå¾—Popularity effects
:::

:::{.fragment}
*Dyadic Covariate*

1. å›½å®¶æ˜¯å¦ä¸ç›¸åŒæ”¿ä½“å›½å®¶æ›´å¯èƒ½ç»“ç›Ÿ
1. åŒä¸ªå…šæ´¾è®®å‘˜æ˜¯å¦æ¯”ä¸åŒå…šæ´¾è®®å‘˜åˆä½œæ›´å¤š
:::

:::{.fragment}
*Structural*

1. Cosponsorshipæ˜¯å¦å­˜åœ¨äº’æƒ 
1. æ•™å®¤ä¸­æŒ‡å®šåŒæ¡Œï¼Œæ˜¯å¦æ”¹å˜ä¸åŒäººç¾¤å…³ç³»
:::
:::

:::{.notes}
è”åˆæŠ—æ•Œ vs "æ”˜å¤–å¿…å…ˆå®‰å†…"

partisanship vs. issues
:::

::::


## ERGMå‰ä¸–

Simple Random Graph Model

$$P(X = x) = \frac{exp(\theta_LL(x))}{k(\theta)}$$

+ L: # of arcs
+ &theta;: edge parameter^[k(&theta)æ„åœ¨æ ‡å‡†åŒ–, æ•´ä¸ªç»“æœå’Œä¸º1ã€‚]

:::{.notes}
1959ï¼Œåªå…è®¸specify links
:::

:::{.fragment}
### Bernoulli Assumption

+ Tie æ˜¯ç‹¬ç«‹çš„ï¼ˆğŸ¤¨ï¼‰
+ IID ties &rarr; Log-probability of a graph is proportional to a weighted sum of edge-count

:::

:::{.notes}
åŸºäºè¿™ä¸ªassumptionæ‰æœ‰simple random graph
:::

## P<sup>1</sup> Model

$$P(X = x) = \frac{exp(\theta_LL(x) + \color{red}{\theta_MM(x) + \sum_i\alpha_iy_{i+} + \sum_j\beta_iy_{+j}})}{\kappa(\theta)}$$

+ M: # of mutual
+ y<sub>i+</sub>: # outgoing ties
+ y<sub>+j</sub>: # incoming ties

:::{.fragment}
### ~~Bernoulli~~ Dyad Independence Assumption

+ å…è®¸äº’æƒ å’Œä¸åŒæ–¹å‘çš„ä¸åŒä½œç”¨
+ ç”¨äºbinary,æœ‰å‘ç½‘ç»œ
:::

:::{.notes}
+ Allows for reciprocity and differential attractiveness
+ Useful for binary, directed graphs
:::

:::{.fragment .fade-in style="text-align:center"}
:::{.fragment .grow}
:::{.fragment .strike}
ç»“æ„?
:::
:::
:::

:::{.notes}
æ‰€æœ‰é«˜äºdegree of reciprocityçš„æ€§è´¨éƒ½ä¸èƒ½è§£å†³, æ²¡äººå†ç”¨
:::

## P<sup>*</sup> Model

$$P(X = x) = \frac{exp(\sum_i\theta_i\color{red}{z_i(x)})}{\kappa(\theta)}$$

z<sub>i</sub>: any network statisticsåŠ åœ¨ä¸€èµ·


:::{.fragment}
### ~~Dyad Independence~~ Markov assumption

+ Ties are (conditionally) independent unless they [share]{.red} a node.
    + Parallels in Markov chains, time series, spatial analysis
+ Think of nodes as [connecting]{.red} edges to obtain this dependence structure
+ Ties are conditionally dependent if and only if they [share]{.red} a node
:::

:::{.notes}
ERGMåŸºäºæ­¤å‘å±•è€Œæ¥ï¼Œç°åœ¨ä¸¤è€…åŒºåˆ«æ›´å¤šæ˜¯computationalè€Œéæƒ³æ³•ä¸Šçš„
:::

## Network Statistics

::::{.columns style="text-align:center"}
:::{.column width="50%"}
![](images/sna_pStarParameters.jpg){height=800 fig-align="center"}
:::

:::{.column width="50%"}
![](images/sna_pStarParametersII.jpg){height=800 fig-align="center"}
:::
::::

:::{.notes}
Things one can test in P*, path closure: å¤šé‡triangle

ç®—èµ·æ¥æ›´éº»çƒ¦ï¼Œ necessary 

å¦‚æœä½ æƒ³äº†è§£æ›´å¤š

```{r ergm}
library(ergm)
?ergm.terms
search.ergmTerms(keyword = "triangle")
```

GOOGLEä¸Šæ²¡æœ‰å…¨çš„è¡¨
:::


## ERGMå®Œå…¨ä½“

\begin{align}
P(N, \boldsymbol{\theta}) =& \frac{exp(\sum_i\theta_iz_i(N))}{\kappa(\theta)}\\
\downarrow& \\
P(N, \boldsymbol{\theta}) =& \frac{exp(\boldsymbol{\theta'h}(N))}{\sum_{N^*\in N}exp(\boldsymbol{\theta'h}(N^*))}
\end{align}

- N* æ˜¯ç‰¹å®šnetwork statistics çš„æ•°ç›®
- åˆ†æ¯éšæ‰€åŠ statisticsè€Œå˜å¾—å¤æ‚

:::{.fragment}
### ERGM Assumptions

1. Modelæ˜¯æ­£ç¡®çš„
1. åœ¨è®¾å®šäº†network statisticsåï¼Œè§‚æµ‹åˆ°ä»»ä½•ä¸¤ä¸ªå…·æœ‰åŒæ ·ç½‘ç»œå±æ€§çš„networksçš„å‡ ç‡æ˜¯ç›¸åŒçš„
:::

:::{.notes}
1. Model is correctly specified
1. Given a set of network statistics, there's equal probability of observing any two networks with the same values of those statistics.
:::

## ç†è§£ERGMç»“æœ

- Network levelï¼š[exp(&theta;)]{.red}ï¼Œrelative likelihood of observing N<sup>i+</sup> to observing N<sup>i-</sup>

:::{.notes}
å¢åŠ ä¸€ä¸ªnetwork statistics æ¯”ä¸åŠ å®ƒå˜åŒ–çš„likelihood

odd-like stuff: é‚£ä¹ˆ &theta; = 0ä»£è¡¨ä»€ä¹ˆï¼Ÿ

&theta; = 0 &rArr; exp(&theta;) = 1 &rArr; å¢åŠ æˆ–ä¸å¢åŠ è¿™ä¸ªstatsçœ‹åˆ°observed networkå‡ ç‡æ˜¯ä¸€æ ·çš„ï¼Œa.k.a., æ²¡ç”¨
:::

- Edge levelï¼š[exp(&theta;<sub>r</sub>&delta;<sub>r</sub><sup>(ij)</sup>)]{.red}, P(N<sub>ij</sub> = 1|N<sub>-ij</sub>, &theta;) = logit<sup>-1</sup>&sum;<sub>r=1</sub>&theta;<sub>r</sub>&delta;<sub>r</sub><sup>(ij)</sup>(N)

:::{.notes}
&delta;<sub>r</sub><sup>(ij)</sup>: Change parameter

è®°å½•æ”¹å˜å¤šå°‘ï¼š æ¯”å¦‚åŒæ ·æ˜¯å¢åŠ ä¸€ä¸ªedgeï¼Œå¯¹äºmutualï¼ˆåŒ…å«reciprocalå’Œnot conntectedï¼‰ï¼Œå¯¹äºi å’Œ jå·²ç»ç›¸è¿çš„æƒ…å†µï¼ŒåŠ ä¸€ä¸ªedgeæ˜¯å¢åŠ äº†ä¸€ä¸ªmutualï¼Œé‚£ä¹ˆ&delta; + 1, ä½†å¦‚æœi å’Œ jä¸ç›¸è¿ï¼Œé‚£ä¹ˆåŠ ä¸€ä¸ªedgeï¼Œæ˜¯æŠŠä¸€ä¸ªäº’ä¸ç›¸è¿çš„mutualå¼„æ²¡äº†ï¼Œ&delta; - 1ã€‚ æ‰€ä»¥å®é™…è®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œä½†btergm::interpret

$logit^{-1} = frac{1}{1 + e^{-1}}$
:::

- Nodal level: Block-wise conditional distributions

:::{.notes}
Blocks are split according to an attribute, complicated
:::

## è·‘å®ŒERGMä¹‹å

::::{.columns style="text-align:center; margin-top: 2em"}
:::{.column width="30%" .fragment}
### è¯Šæ–­
- Convergence
- Degeneracy

:::{.notes}
Degenracy is ERGM goodness of fit, unstable results, random process, model fit, little changes a lot; leading to prediction that everyone should connect to everyone or none

Looking for high p-value (not violate the assumptions)

Convergence is for Markov Chain
:::

:::{.fragment .highlight-red}
Super important!
:::

:::{.fragment}
ä½†æˆ‘ä»¬åªæœ‰ä¸¤å ‚è¯¾â€¦â€¦
:::
:::

:::{.column width="40%" .fragment}
### å±€é™
1. MPLE vs. MLE vs. MCMC-MLE
1. Degeneracy
1. Sensitivity to missing data
:::

:::{.notes}
1. Maximum pseudo LEï¼› å‰ä¸¤ä¸ªå¯¹P1ä¹‹å‰è¿˜å¥½ï¼Œä¹‹åç®—ä¸å‡ºæ¥

Theory really matters!! æ¥è§£é‡Šè¦åŠ ä»€ä¹ˆnetwork statistics

æ€ä¹ˆè§£å†³ geometrically weighted degree distribution

1. Sensitivity
:::

:::{.column width="30%" .fragment}
### è¿›åŒ–
+ GERGM
+ TERGM
    + STERGM
+ FERGM

......
:::

:::{.notes}
G ERGM: weighted ergm

S TERGM: Network panel data, Separable TERGM for each time point the ties formatting and disoluting independently

F ERGM: Frailty ERGM "individual-level random effects" for the propensity for a directed tie
:::
::::



## Take-Home Points

::::{.columns style="text-align:center"}
:::{.column width="50%" .fragment}
Edge Effect (é‚»å±…æ•ˆåº”)

+ Dyad/Triad Census
+ ç¤¾ç¾¤ (Homophily)

Diffusion Effect (æ‰©æ•£åˆ†æ)

+ è”ç³»
+ æš´éœ²
+ ä¼ åŠ¨
:::

:::{.column width="50%" .fragment}
Network Effect (å…¨ç½‘åˆ†æ)

+ ERGM
:::
::::
